---
const offre = Astro.props;
console.log(offre);
---

<div
  x-data={`{ favori: ${offre.favori}, clickFavori() { this.favori = !this.favori; window.setFavori(${JSON.stringify(offre)}) } }`}
  class="bg-blue-200 p-4 rounded-lg relative"
>
  <img
    src={offre.imgUrl}
    alt={offre.nom_maison}
    class="w-full h-80 object-cover rounded-lg"
  />

  <h2 class="text-white p-2">{offre.nom_maison}</h2>

  <a href={`/offres/${offre.id}`} class="text-white">Voir plus</a>

  <button
    class="absolute bottom-0 left-0 p-2 text-white rounded-br-lg"
    @click="clickFavori"
  >
    <img
      :src="favori ? '/favorite_filled.png' : '/favorite.png'"
      alt="Favorite Icon"
      class="w-6 h-6"
    />
  </button>
</div>

<script>
  import { setFavori } from "../backend.mjs";
  window.setFavori = setFavori;
</script>
